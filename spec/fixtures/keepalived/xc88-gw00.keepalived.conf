! Configuration File for keepalived
! Note: Max of 20 ips per vrrp_instance. It's a limitation of the VRRP protocol

global_defs {
   #notification_email {
   #  # Add e-mail notifications
   #}
   #notification_email_from Alexandre.Cassen@firewall.loc
   #smtp_server 192.168.200.1
   #smtp_connect_timeout 30
   lvs_id xc88-gw00
}

vrrp_sync_group XC88_LBA {
  group {
    XC88_LBA_INT
    XC88_LBA_EXT1
 }
}

vrrp_instance XC88_LBA_INT {
    state MASTER
    interface external
    lvs_sync_daemon_interface internal
    virtual_router_id 50
    priority 100
    advert_int 3
    authentication {
        auth_type PASS
        auth_pass 1111
    }
    virtual_ipaddress {
        10.88.0.60/26 dev internal
        10.88.0.67/26 dev internal
    }
}

vrrp_instance XC88_LBA_EXT1 {
    state MASTER
    interface external
    lvs_sync_daemon_interface internal
    virtual_router_id 51
    priority 100
    advert_int 3
    authentication {
        auth_type PASS
        auth_pass 1111
    }
    virtual_ipaddress {
        65.74.175.132/27 dev external # Fail over route target
	65.74.177.129/27 dev external # github production
	65.74.177.130/27 dev external # github staging
	65.74.177.131/27 dev external # nagios
	65.74.177.132/27 dev external # lighthouse production
	65.74.177.133/27 dev external # lighthouse staging
	65.74.177.134/27 dev external # smtp.xc88.engineyard.com
	65.74.177.135/27 dev external # svn
	65.74.177.136/27 dev external # cpanel production
#	65.74.177.137/27 dev external # gw00 ejabbered set up with eynet. DO NOT USE
#	65.74.177.138/27 dev external # gw01 ejabbered set up with eynet. DO NOT USE
    }
}

# slices

# github production
virtual_server 65.74.177.129 80 {
  sorry_server 127.0.0.1 80
  delay_loop 30 
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  virtualhost github.com
  real_server 10.88.192.8 80 {
    weight 1
    HTTP_GET {
      url {
        path /status
	status_code 200
      }
      connect_port 80
      connect_timeout 10 
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.9 80 {
    weight 1
    HTTP_GET {
      url {
        path /status
	status_code 200
      }
      connect_port 80
      connect_timeout 10 
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.10 80 {
    weight 1
    HTTP_GET {
      url {
        path /status
	status_code 200
      }
      connect_port 80
      connect_timeout 10 
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github production ssl 443
virtual_server 65.74.177.129 443 {
  sorry_server 127.0.0.1 443
  delay_loop 30 
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  virtualhost github.com
  real_server 10.88.192.8 443 {
    weight 1
    SSL_GET {
      url {
        path /status
	status_code 200
      }
      connect_port 443
      connect_timeout 10 
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.9 443 {
    weight 1
    SSL_GET {
      url {
        path /status
	status_code 200
      }
      connect_port 443
      connect_timeout 10 
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.10 443 {
    weight 1
    SSL_GET {
      url {
        path /status
	status_code 200
      }
      connect_port 443
      connect_timeout 10
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github production port 3690
virtual_server 65.74.177.129 3690 {
  sorry_server 127.0.0.1 3690
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.8 3690 {
    weight 1
    TCP_CHECK {
      connect_port 3690
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.9 3690 {
    weight 1
    TCP_CHECK {
      connect_port 3690
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.10 3690 {
    weight 1
    TCP_CHECK {
      connect_port 3690
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.12 3690 {
    weight 1
    TCP_CHECK {
      connect_port 3690
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.13 3690 {
    weight 1
    TCP_CHECK {
      connect_port 3690
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github  anonymous git-daemon (required for cloning git repos) port 9418
virtual_server 65.74.177.129 9418 {
  sorry_server 127.0.0.1 9418
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.8 9418 {
    weight 1
    TCP_CHECK {
      connect_port 9418
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.9 9418 {
    weight 1
    TCP_CHECK {
      connect_port 9418
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.10 9418 {
    weight 1
    TCP_CHECK {
      connect_port 9418
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.12 9418 {
    weight 1
    TCP_CHECK {
      connect_port 9418
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.13 9418 {
    weight 1
    TCP_CHECK {
      connect_port 9418
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github production SSH (required for git which uses hardcoded ssh ports)
virtual_server 65.74.177.129 22 {
  sorry_server 127.0.0.1 22
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.8 22 {
    weight 1
    TCP_CHECK {
      connect_port 22
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.9 22 {
    weight 1
    TCP_CHECK {
      connect_port 22
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.10 22 {
    weight 1
    TCP_CHECK {
      connect_port 22
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.12 22 {
    weight 1
    TCP_CHECK {
      connect_port 22
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.13 22 {
    weight 1
    TCP_CHECK {
      connect_port 22
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github staging
virtual_server 65.74.177.130 80 {
  sorry_server 127.0.0.1 80
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.11 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github staging 443
virtual_server 65.74.177.130 443 {
  sorry_server 127.0.0.1 443
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.11 443 {
    weight 1
    TCP_CHECK {
      connect_port 443
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github staging 3690
virtual_server 65.74.177.130 3690 {
  sorry_server 127.0.0.1 3690
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.11 3690 {
    weight 1
    TCP_CHECK {
      connect_port 3690
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github staging 9418
virtual_server 65.74.177.130 9418 {
  sorry_server 127.0.0.1 9418
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.11 9418 {
    weight 1
    TCP_CHECK {
      connect_port 9418
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# github staging 22
virtual_server 65.74.177.130 22 {
  sorry_server 127.0.0.1 22
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.11 22 {
    weight 1
    TCP_CHECK {
      connect_port 22
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

#nagios
virtual_server 65.74.177.131 80 {
  sorry_server 127.0.0.1 80
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.4 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# svn
virtual_server 65.74.177.135 80 {
  sorry_server 127.0.0.1 80
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.19 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# svn SSL
virtual_server 65.74.177.135 443 {
  sorry_server 127.0.0.1 80
  delay_loop 6 
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.19 443 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# lighthouse
virtual_server 65.74.177.132 80 {
  sorry_server 127.0.0.1 80
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.14 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.15 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.16 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# lighthouse port 443
virtual_server 65.74.177.132 443 {
  sorry_server 127.0.0.1 443
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.14 443 {
    weight 1
    TCP_CHECK {
      connect_port 443
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.15 443 {
    weight 1
    TCP_CHECK {
      connect_port 443
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.16 443 {
    weight 1
    TCP_CHECK {
      connect_port 443
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# lighthouse staging
virtual_server 65.74.177.133 80 {
  sorry_server 127.0.0.1 80
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.18 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# lighthouse staging 443
virtual_server 65.74.177.133 443 {
  sorry_server 127.0.0.1 443
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.18 443 {
    weight 1
    TCP_CHECK {
      connect_port 443
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# lighthouse staging ejabberd HTTP
virtual_server 65.74.177.133 5280 {
  sorry_server 127.0.0.1 5280
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.18 5280 {
    weight 1
    TCP_CHECK {
      connect_port 5280
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# lighthouse staging ejabberd s2s
virtual_server 65.74.177.133 5269 {
  sorry_server 127.0.0.1 5269
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.18 5269 {
    weight 1
    TCP_CHECK {
      connect_port 5269
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# lighthouse staging ejabberd clients
virtual_server 65.74.177.133 5223 {
  sorry_server 127.0.0.1 5223
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.18 5223 {
    weight 1
    TCP_CHECK {
      connect_port 5223
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# cpanel production
virtual_server 65.74.177.136 80 {
  sorry_server 127.0.0.1 80
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.21 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
  real_server 10.88.192.22 80 {
    weight 1
    TCP_CHECK {
      connect_port 80
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# cpanel production HTTPS
virtual_server 65.74.177.136 443 {
  sorry_server 127.0.0.1 443
  delay_loop 6  
  lb_algo lc  
  lb_kind NAT  
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP 
  real_server 10.88.192.21 443 {
    weight 1   
    TCP_CHECK {
      connect_port 443
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }            
  real_server 10.88.192.22 443 {
    weight 1
    TCP_CHECK {
      connect_port 443
      connect_timeout 2
      nb_get_retry 20
      delay_before_retry 2
    }
  }
}

# smtp.xc88.engineyard.com
virtual_server 10.88.0.67 25 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.192.6 25 {
    weight 1
    SMTP_CHECK {
      connect_port 25
      connect_ip 10.88.192.6
    }
    connect_timeout 2
    retry 20
    delay_before_retry 2
  }
  real_server 10.88.192.7 25 {
    weight 1
    SMTP_CHECK {
      connect_port 25
      connect_ip 10.88.192.7
    }
    connect_timeout 2
    nb_get_retry 20
    delay_before_retry 2
  }
}

# n00
virtual_server 65.74.175.132 7000 {
        delay_loop 6
        lb_algo lc
        lb_kind NAT
        nat_mask 255.255.255.0
        persistence_timeout 0
        protocol TCP

        real_server 10.88.0.1 22 {
        }
}

# n01
virtual_server 65.74.175.132 7001 {
        delay_loop 6
        lb_algo lc
        lb_kind NAT
        nat_mask 255.255.255.0
        persistence_timeout 0
        protocol TCP

        real_server 10.88.0.2 22 {
        }
}

# n02
virtual_server 65.74.175.132 7002 {
        delay_loop 6
        lb_algo lc
        lb_kind NAT
        nat_mask 255.255.255.0
        persistence_timeout 0
        protocol TCP

        real_server 10.88.0.3 22 {
        }
}

# build slice
virtual_server 65.74.175.132 7999 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.255.1 22 {
  }
}

# xc88-s00000
virtual_server 65.74.175.132 8000 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.1 22 {
  }
}

# xc88-s00001
virtual_server 65.74.175.132 8001 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.2 22 {
  }
}

# xc88-s00002
virtual_server 65.74.175.132 8002 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.3 22 {
  }
}

# xc88-s00003
virtual_server 65.74.175.132 8003 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.4 22 {
  }
}

# xc88-s00004
virtual_server 65.74.175.132 8004 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.5 22 {
  }
}

# xc88-s00005
virtual_server 65.74.175.132 8005 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.6 22 {
  }
}

# xc88-s00006
virtual_server 65.74.175.132 8006 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.7 22 {
  }
}

# xc88-s00007
virtual_server 65.74.175.132 8007 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.8 22 {
  }
}

# xc88-s00008
virtual_server 65.74.175.132 8008 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.9 22 {
  }
}

# xc88-s00009
virtual_server 65.74.175.132 8009 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.10 22 {
  }
}

# xc88-s00010
virtual_server 65.74.175.132 8010 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.11 22 {
  }
}

# xc88-s00011
virtual_server 65.74.175.132 8011 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.12 22 {
  }
}

# xc88-s000012
virtual_server 65.74.175.132 8012 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.13 22 {
  }
}

# xc88-s00013
virtual_server 65.74.175.132 8013 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.14 22 {
  }
}

# xc88-s00014
virtual_server 65.74.175.132 8014 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.15 22 {
  }
}

# xc88-s00015
virtual_server 65.74.175.132 8015 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.16 22 {
  }
}

# xc88-s00016
virtual_server 65.74.175.132 8016 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.17 22 {
  }
}

# xc88-s00017
virtual_server 65.74.175.132 8017 {
  delay_loop 6
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.18 22 {
  }
}

#xc88-s00018 ssh
virtual_server 65.74.175.132 8018 {
  delay_loop 30
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.19 22 {
  }
}

#xc88-s00019 ssh
virtual_server 65.74.175.132 8019 {
  delay_loop 30
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.20 22 {
  }
}

#xc88-s00020 ssh
virtual_server 65.74.175.132 8020 {
  delay_loop 30
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.21 22 {
  }
}

#xc88-s00021 ssh
virtual_server 65.74.175.132 8021 {
  delay_loop 30
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.22 22 {
  }
}
#xc88-s00022 ssh
virtual_server 65.74.175.132 8022 {
  delay_loop 30
  lb_algo lc
  lb_kind NAT
  nat_mask 255.255.255.0
  persistence_timeout 0
  protocol TCP
  real_server 10.88.64.23 22 {
  }
}

#ey03-s00022 ssh                                                                                                                           
virtual_server 74.201.254.36 8022 {                                                                                                        
  delay_loop 30                                                                                                                            
  lb_algo lc                                                                                                                               
  lb_kind NAT                                                                                                                              
  nat_mask 255.255.255.0                                                                                                                   
  persistence_timeout 0                                                                                                                    
  protocol TCP                                                                                                                             
  real_server 10.88.64.23 22 {                                                                                                             
  }                                                                                                                                        
}       
